<!-- sections/swiper.liquid -->
{%- comment -%}

Swiper
Section using Swiper, the most modern mobile touch slider
https://swiperjs.com/

{%- endcomment -%}
<!-- Swiper -->
<div class="swiper-container">
    <div class="swiper-wrapper">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'image_picker' %}
              {% render 'swiper-slide', 
                attributes: block.shopify_attributes,
                title: block.settings.swiper_image_title, 
                image: block.settings.swiper_image %}
            {% endcase %}
        {% endfor %}
    </div>

    {% if section.settings.swiper_pagination %}
      <!-- Pagination -->
      <div class="swiper-pagination"></div>
    {% endif %}

    {% if section.settings.swiper_navigation %}
      <!--Navigation Buttons -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
    {% endif %}

    {% if section.settings.swiper_scrollbar %}
      <!-- Scrollbar -->
      <div class="swiper-scrollbar"></div>
    {% endif %}
</div>

<script>
const swiperSettings = {
  slidesPerView: {{ section.settings.swiper_slidesPerView }}
}; 
</script>

{% schema %}
  {
    "name": "Swiper",
    "class": "swiper-section",
    "tag": "section",
    "max_blocks": 5,
    "settings": [
        {
          "type": "text",
          "id": "swiper_title",
          "label": "Title",
          "default": "Swiper Title"
        },
        {
          "type": "range",
          "id": "swiper_slidesPerView",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Slides Per View",
          "default": 1
        },
        {
          "type": "checkbox",
          "id": "swiper_pagination",
          "label": "Enable Pagination",
          "default": false,
          "info": "Select to add pagination."
        },
        {
          "type": "checkbox",
          "id": "swiper_navigation",
          "label": "Enable Navigation Arrows",
          "default": false,
          "info": "Select to add left and right navigation arrows."
        },
        {
          "type": "checkbox",
          "id": "swiper_scrollbar",
          "label": "Enable Scrollbar",
          "default": false,
          "info": "Select to add a scrollbar."
        }
    ],
    "blocks": [
        {
          "type": "image_picker",
          "name": "Image",
          "settings": [
            {
              "type": "text",
              "id": "swiper_image_title",
              "label": "Title"
            },
            {
              "type": "image_picker",
              "id": "swiper_image",
              "label": "Slide"
            }
          ]
        }
    ],
    "presets": [
      {
        "name": "Swiper",
        "category": "Slideshows"
      }
    ],
    "locales": {
      "en": {
        "swiper_title": "Welcome"
      },
      "fr": {
        "swiper_title": "Bienvenue"
      }
    }
  }
{% endschema %}

{% stylesheet 'scss' %}
.swiper-container {
    width: 100%;
    height: 100%;
    margin-left: auto;
    margin-right: auto;
    .swiper-slide {
      text-align: center;
      font-size: 18px;
      background: #fff;
      height: calc((100% - 30px) / 2);

      /* Center slide text vertically */
      display: -webkit-box;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
      -webkit-box-pack: center;
      -ms-flex-pack: center;
      -webkit-justify-content: center;
      justify-content: center;
      -webkit-box-align: center;
      -ms-flex-align: center;
      -webkit-align-items: center;
      align-items: center;
    }
}
{% endstylesheet %}
{% javascript %}
$(function () {
  const swiper = new Swiper(".swiper-container", {
    slidesPerView: swiperSettings.slidesPerView,
    //spaceBetween: 30,
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
  });
}, swiperSettings);
{% endjavascript %}